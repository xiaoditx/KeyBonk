# 编译说明

## 前置条件

想要编译64位程序，需要如下软件存在：

- GNU make（可通过`make`命令调用，要求4.4.x版本及以上）

- g++（可通过`g++`命令调用，最低需要支持到C++17语法）

- windres.exe（可通过`windres`命令调用）

想要编译32位程序，则不需要g++，但是需要32位的g++，需要能够以`i686-w64-mingw32-g++`命令形式调用，如果不是这个名称，请修改makefile的第十行：

```make
CXX      = i686-w64-mingw32-g++
```

如果想要编译安装包，需要如下软件存在：

- Inno Setup（最好可以使用`iscc`命令调用）

## 编译软件主体

在根目录下使用命令`make`可以编译软件主体，等待运行完毕，即可去`./build/64/`查看编译结果

使用`make ARCH=32`可以编译出32位软件版本

`make clean`可以清理编译相关的一切文件，请谨慎使用，因为它会直接删除`build`文件夹

`make help`可以获取帮助，帮助信息往往先于本文档更新

## 编译软件安装包

在根目录下使用`iscc installer.iss`可以生成64位软件的安装包，文件名为`./build/installer/installer_x64.exe`

也可以使用Inno Setup的GUI编辑器打开installer.iss进行编译

想要编译32位安装包，需要修改installer.iss的内容

找到文件的大概第九行位置的宏定义

```innosetup
#define MyAppArch "64"
#define MyAppArchStr "x64"
```

修改为：

```innosetup
#define MyAppArch "32"
#define MyAppArchStr "x86"
```

随后保存并编译即可

## 一键编译

运行`make_all.bat`即可完成所有编译（除了32位的安装包）


